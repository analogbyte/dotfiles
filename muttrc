# ==== personal
set editor      = `echo \$EDITOR`
set date_format = '%d.%m.%Y %H:%M'

# mailbox settings
set mbox_type   = Maildir
set folder      = ~/Mail
bind index D purge-message

source ~/.mutt/danieln

folder-hook personal/* source ~/.mutt/danieln
folder-hook belwue/*  source ~/.mutt/belwue

mailboxes   +personal/INBOX \
            +personal/Archiv \
            +personal/Entwuerfe \
            +personal/Gesendete_Objekte \
            +personal/Spam \
            +personal/Papierkorb \
            +personal/Mail \
            +personal/Mail.BelWue \
            +personal/Mail.Development \
            +personal/Mail.Selfnet \
            +personal/Mail.Uni \
            +personal/Web \
            +personal/Web.Banken \
            +personal/Web.Cronjobs \
            +personal/Web.Shops \
            +personal/Web.Sonstiges \
            +personal/Web.Sport \
            "+ " \
            "+- BelWü ---------------------" \
            +belwue/INBOX \
            +belwue/INBOX.archiv \
            +belwue/INBOX.intern \
            +belwue/INBOX.nettroll \
            +belwue/INBOX.nfalert \
            +belwue/INBOX.rt \
            +belwue/INBOX.sms-gateway \
            +belwue/INBOX.sysadmin \
            +belwue/INBOX.sysadmin-auto \
            +belwue/INBOX.sysalert \
            +belwue/Drafts \
            +belwue/Sent \
            +belwue/Spam \
            +belwue/Trash \
            "+  " \
            "+- Listen --------------------" \
            +personal/Listen.ansible-project \
            +personal/Listen.arch-announce \
            +personal/Listen.arch-general \
            +personal/Listen.denog \
            +personal/Listen.fulldisclosure \
            +personal/Listen.geant-sig-noc \
            +personal/Listen.i3wm \
            +personal/Listen.nanog \
            +personal/Listen.nowiknow \
            +personal/Listen.oss-security \
            +personal/Listen.python-dev \
            +personal/Listen.rust \

# dirs
set header_cache        = '~/.cache/mutt'
set message_cachedir    = '~/.cache/mutt'
set mailcap_path        = '~/.mutt/mailcap'

# notify
set new_mail_command="notify-send 'New Email' 'There are unread messages in %b mailboxes.' &"

# pseudo address book
# set query_command = "notmuch address '*' | sed 's/.*<\(.*\)>/\1/' | sort -u | grep -i '%s' | (echo '' && cat)"
set query_command="notmuch-addrlookup --mutt '%s'"

# be fast, dont wait along
set quit            = yes
set delete          = yes
set confirmappend   = no
set wait_key        = yes
set autoedit        = no
set edit_headers    = yes
set fast_reply      = yes

# misc
set auto_tag        = yes
set thorough_search = yes
set uncollapse_jump = yes
set beep_new        = yes
set mark_old        = no

# new mails
set forward_decode  = yes
set forward_format  = "Fwd: %s"
set forward_quote   = yes
set include         = yes
set reply_to        = yes
set send_charset    = 'utf-8:iso-8859-15:iso-8859-1:us-ascii'
set text_flowed     = yes
set user_agent      = no

# gpg
set crypt_replysign     = yes
set crypt_replyencrypt  = yes
set crypt_verify_sig    = yes

# attachments
set abort_noattach = ask-yes
set attach_keyword = "\\<(attach|attached|attachment|attachments|anhängen|angehängt|anhang|anhänge|hängt an|anbei)\\>"

# global looks
set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]─%V──[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?─── %L"

# sidebar looks
set sidebar_visible         = yes
set sidebar_width           = 32
set sidebar_format          = "%B%?F? [%F]?%* %?N?%N/?%S"
set sidebar_folder_indent   = yes
set sidebar_short_path      = yes
set mail_check_stats        = yes

# index looks
set index_format        = "[%Z]%?M?<& ? %D  %-20.20F  %s"
set sort                = threads
set sort_aux            = reverse-last-date-received
set pager_index_lines   = 20

# message looks
alternative_order text/plain text/enriched text/html
ignore *
unignore from: to: cc: date: subject:
unhdr_order *
hdr_order from: to: cc: date: subject:
unset markers
set pager_context   = 10
set tilde           = yes
set quote_regexp    = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
set assumed_charset = 'utf-8:iso8859-15:us-ascii'

# mappings in index
bind index j next-entry
bind index k previous-entry
bind index <tab> sync-mailbox
bind index R group-reply
bind index <space> collapse-thread
bind index h toggle-new

# mappings in editor
bind editor <Tab> complete-query

# mappings in all contexts
bind index,pager,attach g noop
bind index,pager,attach gg first-entry
bind index,pager,attach G last-entry
bind index,pager,attach \CD next-page
bind index,pager,attach \CU previous-page
bind index,pager J sidebar-next
bind index,pager K sidebar-prev
bind index,pager L sidebar-open
bind index,pager \CO sidebar-open
bind index,pager n next-unread
bind index,pager N next-unread-mailbox
macro index,pager \CP "<sidebar-prev-new><sidebar-open>" "open prev unread mailbox"
macro index,pager \CN "<sidebar-next-new><sidebar-open>" "open next unread mailbox"
bind index,pager @ compose-to-sender

# mappings in email view
bind pager,attach <down> next-line
bind pager,attach <up> previous-line

# macros
macro index,pager A "<tag-pattern>~N<enter><tag-prefix><clear-flag>N<tag-pattern>~O<enter><tag-prefix><clear-flag>O<untag-pattern>.<enter>" "mark all as read"
macro attach,index,pager O "<shell-escape>offlineimap -a belwue,personal<enter>"

macro attach,index,pager b "<enter-command>toggle sidebar_visible<enter>"

# colors
color sidebar_new green color233
color sidebar_highlight blue color233
color sidebar_indicator black blue
color sidebar_divider blue default

color normal default default
color error red default
color indicator black blue
color status blue default

color hdrdefault yellow default
color header brightyellow default "^(Subject): "
color signature white default

color body red default [\-\.+_a-zA-Z0-9]+@[\-\.a-zA-Z0-9]+
color body red default ((https?|ftp)://|www)+[\-\.\;@,/%~_:?&=\#a-zA-Z0-9+]+
color search cyan default

color quoted cyan default
color quoted1 magenta default

color tilde white default
color tree brightwhite default
color attachment yellow default

color index brightgreen color233 ~N
color index green color233 ~O
color index brightred color233 ~F
color index blue color233 ~T
